{"planJson":{"resource_changes":[{"address":"module.elb.aws_elb.web","module_address":"module.elb","mode":"managed","type":"aws_elb","name":"web","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"connection_draining":true,"connection_draining_timeout":400,"cross_zone_load_balancing":true,"desync_mitigation_mode":"defensive","health_check":[{"healthy_threshold":2,"interval":30,"target":"HTTP:80/","timeout":3,"unhealthy_threshold":2}],"idle_timeout":400,"listener":[{"instance_port":80,"instance_protocol":"http","lb_port":80,"lb_protocol":"http","ssl_certificate_id":""}],"name":"example-elb","tags":null,"timeouts":null},"after_unknown":{"access_logs":[],"arn":true,"availability_zones":true,"dns_name":true,"health_check":[{}],"id":true,"instances":true,"internal":true,"listener":[{}],"name_prefix":true,"security_groups":true,"source_security_group":true,"source_security_group_id":true,"subnets":true,"tags_all":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"availability_zones":[],"health_check":[{}],"instances":[],"listener":[{}],"security_groups":[],"subnets":[],"tags_all":{}}}},{"address":"module.elb.aws_instance.web","module_address":"module.elb","mode":"managed","type":"aws_instance","name":"web","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-5f709f34","credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","key_name":"terraform-aws-provider-example","launch_template":[],"source_dest_check":true,"tags":{"Name":"elb-example"},"tags_all":{"Name":"elb-example"},"timeouts":null,"user_data":"a41cf0adaab665823c19a8f869f1cb12d597660b","user_data_replace_on_change":false,"volume_tags":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_options":true,"cpu_threads_per_core":true,"credit_specification":[],"disable_api_stop":true,"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"host_resource_group_arn":true,"iam_instance_profile":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_lifecycle":true,"instance_market_options":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"launch_template":[],"maintenance_options":true,"metadata_options":true,"monitoring":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_partition_number":true,"primary_network_interface_id":true,"private_dns":true,"private_dns_name_options":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"spot_instance_request_id":true,"subnet_id":true,"tags":{},"tags_all":{},"tenancy":true,"user_data_base64":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.elb.aws_internet_gateway.gw","module_address":"module.elb","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"tf_test_ig"},"tags_all":{"Name":"tf_test_ig"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.elb.aws_lb_cookie_stickiness_policy.default","module_address":"module.elb","mode":"managed","type":"aws_lb_cookie_stickiness_policy","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cookie_expiration_period":600,"lb_port":80,"name":"lbpolicy"},"after_unknown":{"id":true,"load_balancer":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.elb.aws_route_table.r","module_address":"module.elb","mode":"managed","type":"aws_route_table","name":"r","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"aws_route_table"},"tags_all":{"Name":"aws_route_table"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.elb.aws_route_table_association.a","module_address":"module.elb","mode":"managed","type":"aws_route_table_association","name":"a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.elb.aws_security_group.default","module_address":"module.elb","mode":"managed","type":"aws_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Used in the terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"instance_sg","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}},{"address":"module.elb.aws_security_group.elb","module_address":"module.elb","mode":"managed","type":"aws_security_group","name":"elb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Used in the terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"elb_sg","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}},{"address":"module.elb.aws_subnet.tf_test_subnet","module_address":"module.elb","mode":"managed","type":"aws_subnet","name":"tf_test_subnet","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"tf_test_subnet"},"tags_all":{"Name":"tf_test_subnet"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.elb.aws_vpc.default","module_address":"module.elb","mode":"managed","type":"aws_vpc","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"tf_test"},"tags_all":{"Name":"tf_test"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}}],"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","expressions":{"region":{"constant_value":"us-west-2"}}},"module.eks:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.eks","expressions":{"region":{"references":["var.aws_region"]}}},"module.eks:http":{"name":"http","full_name":"registry.terraform.io/hashicorp/http","module_address":"module.eks"},"module.elb:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.elb","expressions":{"region":{"references":["var.aws_region"]}}},"module.lambda-file-systems:archive":{"name":"archive","full_name":"registry.terraform.io/hashicorp/archive","module_address":"module.lambda-file-systems"},"module.lambda-file-systems:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.lambda-file-systems","expressions":{"region":{"references":["var.aws_region"]}}},"module.sagemaker:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.sagemaker","expressions":{"region":{"constant_value":"us-west-2"}}},"module.sagemaker:random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","module_address":"module.sagemaker"}},"root_module":{"module_calls":{"ecs-alb":{"source":"./ecs-alb","expressions":{"admin_cidr_ingress":{"references":["var.admin_cidr_ingress"]}},"module":{"outputs":{"asg_name":{"expression":{"references":["aws_autoscaling_group.app.id","aws_autoscaling_group.app"]}},"elb_hostname":{"expression":{"references":["aws_alb.main.dns_name","aws_alb.main"]}},"instance_security_group":{"expression":{"references":["aws_security_group.instance_sg.id","aws_security_group.instance_sg"]}},"launch_configuration":{"expression":{"references":["aws_launch_configuration.app.id","aws_launch_configuration.app"]}}},"resources":[{"address":"aws_alb.main","mode":"managed","type":"aws_alb","name":"main","provider_config_key":"aws","expressions":{"name":{"constant_value":"tf-example-alb-ecs"},"security_groups":{"references":["aws_security_group.lb_sg.id","aws_security_group.lb_sg"]},"subnets":{"references":["aws_subnet.main"]}},"schema_version":0},{"address":"aws_alb_listener.front_end","mode":"managed","type":"aws_alb_listener","name":"front_end","provider_config_key":"aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_alb_target_group.test.id","aws_alb_target_group.test"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_alb.main.id","aws_alb.main"]},"port":{"constant_value":"80"},"protocol":{"constant_value":"HTTP"}},"schema_version":0},{"address":"aws_alb_target_group.test","mode":"managed","type":"aws_alb_target_group","name":"test","provider_config_key":"aws","expressions":{"name":{"constant_value":"tf-example-ecs-ghost"},"port":{"constant_value":8080},"protocol":{"constant_value":"HTTP"},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_autoscaling_group.app","mode":"managed","type":"aws_autoscaling_group","name":"app","provider_config_key":"aws","expressions":{"desired_capacity":{"references":["var.asg_desired"]},"launch_configuration":{"references":["aws_launch_configuration.app.name","aws_launch_configuration.app"]},"max_size":{"references":["var.asg_max"]},"min_size":{"references":["var.asg_min"]},"name":{"constant_value":"tf-test-asg"},"vpc_zone_identifier":{"references":["aws_subnet.main"]}},"schema_version":1},{"address":"aws_cloudwatch_log_group.app","mode":"managed","type":"aws_cloudwatch_log_group","name":"app","provider_config_key":"aws","expressions":{"name":{"constant_value":"tf-ecs-group/app-ghost"}},"schema_version":0},{"address":"aws_cloudwatch_log_group.ecs","mode":"managed","type":"aws_cloudwatch_log_group","name":"ecs","provider_config_key":"aws","expressions":{"name":{"constant_value":"tf-ecs-group/ecs-agent"}},"schema_version":0},{"address":"aws_ecs_cluster.main","mode":"managed","type":"aws_ecs_cluster","name":"main","provider_config_key":"aws","expressions":{"name":{"constant_value":"terraform_example_ecs_cluster"}},"schema_version":0},{"address":"aws_ecs_service.test","mode":"managed","type":"aws_ecs_service","name":"test","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.main.id","aws_ecs_cluster.main"]},"desired_count":{"references":["var.service_desired"]},"iam_role":{"references":["aws_iam_role.ecs_service.name","aws_iam_role.ecs_service"]},"load_balancer":[{"container_name":{"constant_value":"ghost"},"container_port":{"constant_value":"2368"},"target_group_arn":{"references":["aws_alb_target_group.test.id","aws_alb_target_group.test"]}}],"name":{"constant_value":"tf-example-ecs-ghost"},"task_definition":{"references":["aws_ecs_task_definition.ghost.arn","aws_ecs_task_definition.ghost"]}},"schema_version":0,"depends_on":["aws_iam_role_policy.ecs_service","aws_alb_listener.front_end"]},{"address":"aws_ecs_task_definition.ghost","mode":"managed","type":"aws_ecs_task_definition","name":"ghost","provider_config_key":"aws","expressions":{"container_definitions":{"references":["path.module","data.aws_region.current.name","data.aws_region.current","aws_cloudwatch_log_group.app.name","aws_cloudwatch_log_group.app"]},"family":{"constant_value":"tf_example_ghost_td"}},"schema_version":1},{"address":"aws_iam_instance_profile.app","mode":"managed","type":"aws_iam_instance_profile","name":"app","provider_config_key":"aws","expressions":{"name":{"constant_value":"tf-ecs-instprofile"},"role":{"references":["aws_iam_role.app_instance.name","aws_iam_role.app_instance"]}},"schema_version":0},{"address":"aws_iam_role.app_instance","mode":"managed","type":"aws_iam_role","name":"app_instance","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"},"name":{"constant_value":"tf-ecs-example-instance-role"}},"schema_version":0},{"address":"aws_iam_role.ecs_service","mode":"managed","type":"aws_iam_role","name":"ecs_service","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2008-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"ecs.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"},"name":{"constant_value":"tf_example_ecs_role"}},"schema_version":0},{"address":"aws_iam_role_policy.ecs_service","mode":"managed","type":"aws_iam_role_policy","name":"ecs_service","provider_config_key":"aws","expressions":{"name":{"constant_value":"tf_example_ecs_policy"},"policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:Describe*\",\n        \"elasticloadbalancing:DeregisterInstancesFromLoadBalancer\",\n        \"elasticloadbalancing:DeregisterTargets\",\n        \"elasticloadbalancing:Describe*\",\n        \"elasticloadbalancing:RegisterInstancesWithLoadBalancer\",\n        \"elasticloadbalancing:RegisterTargets\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n"},"role":{"references":["aws_iam_role.ecs_service.name","aws_iam_role.ecs_service"]}},"schema_version":0},{"address":"aws_iam_role_policy.instance","mode":"managed","type":"aws_iam_role_policy","name":"instance","provider_config_key":"aws","expressions":{"name":{"constant_value":"TfEcsExampleInstanceRole"},"policy":{"references":["path.module","aws_cloudwatch_log_group.app.arn","aws_cloudwatch_log_group.app","aws_cloudwatch_log_group.ecs.arn","aws_cloudwatch_log_group.ecs"]},"role":{"references":["aws_iam_role.app_instance.name","aws_iam_role.app_instance"]}},"schema_version":0},{"address":"aws_internet_gateway.gw","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_config_key":"aws","expressions":{"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_launch_configuration.app","mode":"managed","type":"aws_launch_configuration","name":"app","provider_config_key":"aws","expressions":{"associate_public_ip_address":{"constant_value":true},"iam_instance_profile":{"references":["aws_iam_instance_profile.app.name","aws_iam_instance_profile.app"]},"image_id":{"references":["data.aws_ssm_parameter.ecs_image_id.value","data.aws_ssm_parameter.ecs_image_id"]},"instance_type":{"references":["var.instance_type"]},"security_groups":{"references":["aws_security_group.instance_sg.id","aws_security_group.instance_sg"]},"user_data":{"references":["path.module","data.aws_region.current.name","data.aws_region.current","aws_ecs_cluster.main.name","aws_ecs_cluster.main","aws_cloudwatch_log_group.ecs.name","aws_cloudwatch_log_group.ecs"]}},"schema_version":0},{"address":"aws_route_table.r","mode":"managed","type":"aws_route_table","name":"r","provider_config_key":"aws","expressions":{"route":{"references":["aws_internet_gateway.gw.id","aws_internet_gateway.gw"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_route_table_association.a","mode":"managed","type":"aws_route_table_association","name":"a","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.r.id","aws_route_table.r"]},"subnet_id":{"references":["aws_subnet.main","count.index"]}},"schema_version":0,"count_expression":{"references":["var.az_count"]}},{"address":"aws_security_group.instance_sg","mode":"managed","type":"aws_security_group","name":"instance_sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"controls direct access to application instances"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.admin_cidr_ingress","aws_security_group.lb_sg.id","aws_security_group.lb_sg"]},"name":{"constant_value":"tf-ecs-instsg"},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_security_group.lb_sg","mode":"managed","type":"aws_security_group","name":"lb_sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"controls access to the application ELB"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80}]},"name":{"constant_value":"tf-ecs-lbsg"},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available.names","data.aws_availability_zones.available","count.index"]},"cidr_block":{"references":["aws_vpc.main.cidr_block","aws_vpc.main","count.index"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1,"count_expression":{"references":["var.az_count"]}},{"address":"aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"10.10.0.0/16"}},"schema_version":1},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_ssm_parameter.ecs_image_id","mode":"data","type":"aws_ssm_parameter","name":"ecs_image_id","provider_config_key":"aws","expressions":{"name":{"constant_value":"/aws/service/ecs/optimized-ami/amazon-linux-2023/recommended/image_id"}},"schema_version":0}],"variables":{"admin_cidr_ingress":{"description":"CIDR to allow tcp/22 ingress to EC2 instance"},"asg_desired":{"default":"1","description":"Desired numbers of servers in ASG"},"asg_max":{"default":"2","description":"Max numbers of servers in ASG"},"asg_min":{"default":"1","description":"Min numbers of servers in ASG"},"az_count":{"default":2,"description":"Number of AZs to cover in a given AWS region"},"instance_type":{"default":"t3.small","description":"AWS instance type"},"service_desired":{"default":"1","description":"Desired numbers of instances in the ecs service"}}}},"eks":{"source":"./eks","module":{"outputs":{"config_map_aws_auth":{"expression":{"references":["local.config_map_aws_auth"]}},"kubeconfig":{"expression":{"references":["local.kubeconfig"]}}},"resources":[{"address":"aws_eks_cluster.demo","mode":"managed","type":"aws_eks_cluster","name":"demo","provider_config_key":"module.eks:aws","expressions":{"name":{"references":["var.cluster_name"]},"role_arn":{"references":["aws_iam_role.demo-cluster.arn","aws_iam_role.demo-cluster"]},"vpc_config":[{"security_group_ids":{"references":["aws_security_group.demo-cluster.id","aws_security_group.demo-cluster"]},"subnet_ids":{"references":["aws_subnet.demo"]}}]},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.demo-cluster-AmazonEKSClusterPolicy","aws_iam_role_policy_attachment.demo-cluster-AmazonEKSVPCResourceController"]},{"address":"aws_eks_node_group.demo","mode":"managed","type":"aws_eks_node_group","name":"demo","provider_config_key":"module.eks:aws","expressions":{"cluster_name":{"references":["aws_eks_cluster.demo.name","aws_eks_cluster.demo"]},"node_group_name":{"constant_value":"demo"},"node_role_arn":{"references":["aws_iam_role.demo-node.arn","aws_iam_role.demo-node"]},"scaling_config":[{"desired_size":{"constant_value":1},"max_size":{"constant_value":1},"min_size":{"constant_value":1}}],"subnet_ids":{"references":["aws_subnet.demo"]}},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.demo-node-AmazonEKSWorkerNodePolicy","aws_iam_role_policy_attachment.demo-node-AmazonEKS_CNI_Policy","aws_iam_role_policy_attachment.demo-node-AmazonEC2ContainerRegistryReadOnly"]},{"address":"aws_iam_role.demo-cluster","mode":"managed","type":"aws_iam_role","name":"demo-cluster","provider_config_key":"module.eks:aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"eks.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"},"name":{"constant_value":"terraform-eks-demo-cluster"}},"schema_version":0},{"address":"aws_iam_role.demo-node","mode":"managed","type":"aws_iam_role","name":"demo-node","provider_config_key":"module.eks:aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"},"name":{"constant_value":"terraform-eks-demo-node"}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.demo-cluster-AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"demo-cluster-AmazonEKSClusterPolicy","provider_config_key":"module.eks:aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy"},"role":{"references":["aws_iam_role.demo-cluster.name","aws_iam_role.demo-cluster"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.demo-cluster-AmazonEKSVPCResourceController","mode":"managed","type":"aws_iam_role_policy_attachment","name":"demo-cluster-AmazonEKSVPCResourceController","provider_config_key":"module.eks:aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSVPCResourceController"},"role":{"references":["aws_iam_role.demo-cluster.name","aws_iam_role.demo-cluster"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.demo-node-AmazonEC2ContainerRegistryReadOnly","mode":"managed","type":"aws_iam_role_policy_attachment","name":"demo-node-AmazonEC2ContainerRegistryReadOnly","provider_config_key":"module.eks:aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"},"role":{"references":["aws_iam_role.demo-node.name","aws_iam_role.demo-node"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.demo-node-AmazonEKSWorkerNodePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"demo-node-AmazonEKSWorkerNodePolicy","provider_config_key":"module.eks:aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"},"role":{"references":["aws_iam_role.demo-node.name","aws_iam_role.demo-node"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.demo-node-AmazonEKS_CNI_Policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"demo-node-AmazonEKS_CNI_Policy","provider_config_key":"module.eks:aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"},"role":{"references":["aws_iam_role.demo-node.name","aws_iam_role.demo-node"]}},"schema_version":0},{"address":"aws_internet_gateway.demo","mode":"managed","type":"aws_internet_gateway","name":"demo","provider_config_key":"module.eks:aws","expressions":{"tags":{"constant_value":{"Name":"terraform-eks-demo"}},"vpc_id":{"references":["aws_vpc.demo.id","aws_vpc.demo"]}},"schema_version":0},{"address":"aws_route_table.demo","mode":"managed","type":"aws_route_table","name":"demo","provider_config_key":"module.eks:aws","expressions":{"route":{"references":["aws_internet_gateway.demo.id","aws_internet_gateway.demo"]},"vpc_id":{"references":["aws_vpc.demo.id","aws_vpc.demo"]}},"schema_version":0},{"address":"aws_route_table_association.demo","mode":"managed","type":"aws_route_table_association","name":"demo","provider_config_key":"module.eks:aws","expressions":{"route_table_id":{"references":["aws_route_table.demo.id","aws_route_table.demo"]},"subnet_id":{"references":["aws_subnet.demo","count.index"]}},"schema_version":0,"count_expression":{"constant_value":2}},{"address":"aws_security_group.demo-cluster","mode":"managed","type":"aws_security_group","name":"demo-cluster","provider_config_key":"module.eks:aws","expressions":{"description":{"constant_value":"Cluster communication with worker nodes"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"name":{"constant_value":"terraform-eks-demo-cluster"},"tags":{"constant_value":{"Name":"terraform-eks-demo"}},"vpc_id":{"references":["aws_vpc.demo.id","aws_vpc.demo"]}},"schema_version":1},{"address":"aws_security_group_rule.demo-cluster-ingress-workstation-https","mode":"managed","type":"aws_security_group_rule","name":"demo-cluster-ingress-workstation-https","provider_config_key":"module.eks:aws","expressions":{"cidr_blocks":{"references":["local.workstation-external-cidr"]},"description":{"constant_value":"Allow workstation to communicate with the cluster API Server"},"from_port":{"constant_value":443},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.demo-cluster.id","aws_security_group.demo-cluster"]},"to_port":{"constant_value":443},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_subnet.demo","mode":"managed","type":"aws_subnet","name":"demo","provider_config_key":"module.eks:aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available.names","data.aws_availability_zones.available","count.index"]},"cidr_block":{"references":["count.index"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["var.cluster_name"]},"vpc_id":{"references":["aws_vpc.demo.id","aws_vpc.demo"]}},"schema_version":1,"count_expression":{"constant_value":2}},{"address":"aws_vpc.demo","mode":"managed","type":"aws_vpc","name":"demo","provider_config_key":"module.eks:aws","expressions":{"cidr_block":{"constant_value":"10.0.0.0/16"},"tags":{"references":["var.cluster_name"]}},"schema_version":1},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"module.eks:aws","schema_version":0},{"address":"data.http.workstation-external-ip","mode":"data","type":"http","name":"workstation-external-ip","provider_config_key":"module.eks:http","expressions":{"url":{"constant_value":"http://ipv4.icanhazip.com"}},"schema_version":0}],"variables":{"aws_region":{"default":"us-west-2"},"cluster_name":{"default":"terraform-eks-demo"}}}},"elb":{"source":"./elb","expressions":{"key_name":{"references":["var.key_name"]}},"module":{"outputs":{"address":{"expression":{"references":["aws_elb.web.dns_name","aws_elb.web"]}}},"resources":[{"address":"aws_elb.web","mode":"managed","type":"aws_elb","name":"web","provider_config_key":"module.elb:aws","expressions":{"connection_draining":{"constant_value":true},"connection_draining_timeout":{"constant_value":400},"cross_zone_load_balancing":{"constant_value":true},"health_check":[{"healthy_threshold":{"constant_value":2},"interval":{"constant_value":30},"target":{"constant_value":"HTTP:80/"},"timeout":{"constant_value":3},"unhealthy_threshold":{"constant_value":2}}],"idle_timeout":{"constant_value":400},"instances":{"references":["aws_instance.web.id","aws_instance.web"]},"listener":[{"instance_port":{"constant_value":80},"instance_protocol":{"constant_value":"http"},"lb_port":{"constant_value":80},"lb_protocol":{"constant_value":"http"}}],"name":{"constant_value":"example-elb"},"security_groups":{"references":["aws_security_group.elb.id","aws_security_group.elb"]},"subnets":{"references":["aws_subnet.tf_test_subnet.id","aws_subnet.tf_test_subnet"]}},"schema_version":0},{"address":"aws_instance.web","mode":"managed","type":"aws_instance","name":"web","provider_config_key":"module.elb:aws","expressions":{"ami":{"references":["var.aws_amis","var.aws_region"]},"instance_type":{"constant_value":"t2.micro"},"key_name":{"references":["var.key_name"]},"subnet_id":{"references":["aws_subnet.tf_test_subnet.id","aws_subnet.tf_test_subnet"]},"tags":{"constant_value":{"Name":"elb-example"}},"user_data":{},"vpc_security_group_ids":{"references":["aws_security_group.default.id","aws_security_group.default"]}},"schema_version":1},{"address":"aws_internet_gateway.gw","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_config_key":"module.elb:aws","expressions":{"tags":{"constant_value":{"Name":"tf_test_ig"}},"vpc_id":{"references":["aws_vpc.default.id","aws_vpc.default"]}},"schema_version":0},{"address":"aws_lb_cookie_stickiness_policy.default","mode":"managed","type":"aws_lb_cookie_stickiness_policy","name":"default","provider_config_key":"module.elb:aws","expressions":{"cookie_expiration_period":{"constant_value":600},"lb_port":{"constant_value":80},"load_balancer":{"references":["aws_elb.web.id","aws_elb.web"]},"name":{"constant_value":"lbpolicy"}},"schema_version":0},{"address":"aws_route_table.r","mode":"managed","type":"aws_route_table","name":"r","provider_config_key":"module.elb:aws","expressions":{"route":{"references":["aws_internet_gateway.gw.id","aws_internet_gateway.gw"]},"tags":{"constant_value":{"Name":"aws_route_table"}},"vpc_id":{"references":["aws_vpc.default.id","aws_vpc.default"]}},"schema_version":0},{"address":"aws_route_table_association.a","mode":"managed","type":"aws_route_table_association","name":"a","provider_config_key":"module.elb:aws","expressions":{"route_table_id":{"references":["aws_route_table.r.id","aws_route_table.r"]},"subnet_id":{"references":["aws_subnet.tf_test_subnet.id","aws_subnet.tf_test_subnet"]}},"schema_version":0},{"address":"aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_config_key":"module.elb:aws","expressions":{"description":{"constant_value":"Used in the terraform"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80}]},"name":{"constant_value":"instance_sg"},"vpc_id":{"references":["aws_vpc.default.id","aws_vpc.default"]}},"schema_version":1},{"address":"aws_security_group.elb","mode":"managed","type":"aws_security_group","name":"elb","provider_config_key":"module.elb:aws","expressions":{"description":{"constant_value":"Used in the terraform"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80}]},"name":{"constant_value":"elb_sg"},"vpc_id":{"references":["aws_vpc.default.id","aws_vpc.default"]}},"schema_version":1,"depends_on":["aws_internet_gateway.gw"]},{"address":"aws_subnet.tf_test_subnet","mode":"managed","type":"aws_subnet","name":"tf_test_subnet","provider_config_key":"module.elb:aws","expressions":{"cidr_block":{"constant_value":"10.0.0.0/24"},"map_public_ip_on_launch":{"constant_value":true},"tags":{"constant_value":{"Name":"tf_test_subnet"}},"vpc_id":{"references":["aws_vpc.default.id","aws_vpc.default"]}},"schema_version":1},{"address":"aws_vpc.default","mode":"managed","type":"aws_vpc","name":"default","provider_config_key":"module.elb:aws","expressions":{"cidr_block":{"constant_value":"10.0.0.0/16"},"enable_dns_hostnames":{"constant_value":true},"tags":{"constant_value":{"Name":"tf_test"}}},"schema_version":1}],"variables":{"aws_amis":{"default":{"us-east-1":"ami-5f709f34","us-west-2":"ami-7f675e4f"}},"aws_region":{"default":"us-east-1","description":"AWS region to launch servers."},"key_name":{"description":"Name of the SSH keypair to use in AWS."}}}},"lambda-file-systems":{"source":"./lambda-file-systems","module":{"outputs":{"lambda":{"expression":{"references":["aws_lambda_function.example_lambda.qualified_arn","aws_lambda_function.example_lambda"]}}},"resources":[{"address":"aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_config_key":"module.lambda-file-systems:aws","expressions":{"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"vpc_id":{"references":["aws_default_vpc.default.id","aws_default_vpc.default"]}},"schema_version":1},{"address":"aws_default_subnet.default_az1","mode":"managed","type":"aws_default_subnet","name":"default_az1","provider_config_key":"module.lambda-file-systems:aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available.names[0]","data.aws_availability_zones.available.names","data.aws_availability_zones.available"]}},"schema_version":1},{"address":"aws_default_subnet.default_az2","mode":"managed","type":"aws_default_subnet","name":"default_az2","provider_config_key":"module.lambda-file-systems:aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available.names[1]","data.aws_availability_zones.available.names","data.aws_availability_zones.available"]}},"schema_version":1},{"address":"aws_default_vpc.default","mode":"managed","type":"aws_default_vpc","name":"default","provider_config_key":"module.lambda-file-systems:aws","schema_version":1},{"address":"aws_efs_access_point.access_point_lambda","mode":"managed","type":"aws_efs_access_point","name":"access_point_lambda","provider_config_key":"module.lambda-file-systems:aws","expressions":{"file_system_id":{"references":["aws_efs_file_system.efs_for_lambda.id","aws_efs_file_system.efs_for_lambda"]},"posix_user":[{"gid":{"constant_value":1000},"uid":{"constant_value":1000}}],"root_directory":[{"creation_info":[{"owner_gid":{"constant_value":1000},"owner_uid":{"constant_value":1000},"permissions":{"constant_value":"777"}}],"path":{"constant_value":"/lambda"}}]},"schema_version":0},{"address":"aws_efs_file_system.efs_for_lambda","mode":"managed","type":"aws_efs_file_system","name":"efs_for_lambda","provider_config_key":"module.lambda-file-systems:aws","expressions":{"tags":{"constant_value":{"Name":"efs_for_lambda"}}},"schema_version":0},{"address":"aws_efs_mount_target.mount_target_az1","mode":"managed","type":"aws_efs_mount_target","name":"mount_target_az1","provider_config_key":"module.lambda-file-systems:aws","expressions":{"file_system_id":{"references":["aws_efs_file_system.efs_for_lambda.id","aws_efs_file_system.efs_for_lambda"]},"security_groups":{"references":["aws_default_security_group.default.id","aws_default_security_group.default"]},"subnet_id":{"references":["aws_default_subnet.default_az1.id","aws_default_subnet.default_az1"]}},"schema_version":0},{"address":"aws_efs_mount_target.mount_target_az2","mode":"managed","type":"aws_efs_mount_target","name":"mount_target_az2","provider_config_key":"module.lambda-file-systems:aws","expressions":{"file_system_id":{"references":["aws_efs_file_system.efs_for_lambda.id","aws_efs_file_system.efs_for_lambda"]},"security_groups":{"references":["aws_default_security_group.default.id","aws_default_security_group.default"]},"subnet_id":{"references":["aws_default_subnet.default_az2.id","aws_default_subnet.default_az2"]}},"schema_version":0},{"address":"aws_iam_role.iam_role_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_role_for_lambda","provider_config_key":"module.lambda-file-systems:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume_role_policy.json","data.aws_iam_policy_document.assume_role_policy"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.AWSLambdaVPCAccessExecutionRole-attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AWSLambdaVPCAccessExecutionRole-attach","provider_config_key":"module.lambda-file-systems:aws","expressions":{"policy_arn":{"references":["data.aws_iam_policy.AWSLambdaVPCAccessExecutionRole.arn","data.aws_iam_policy.AWSLambdaVPCAccessExecutionRole"]},"role":{"references":["aws_iam_role.iam_role_for_lambda.name","aws_iam_role.iam_role_for_lambda"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.AmazonElasticFileSystemClientFullAccess-attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonElasticFileSystemClientFullAccess-attach","provider_config_key":"module.lambda-file-systems:aws","expressions":{"policy_arn":{"references":["data.aws_iam_policy.AmazonElasticFileSystemClientFullAccess.arn","data.aws_iam_policy.AmazonElasticFileSystemClientFullAccess"]},"role":{"references":["aws_iam_role.iam_role_for_lambda.name","aws_iam_role.iam_role_for_lambda"]}},"schema_version":0},{"address":"aws_lambda_function.example_lambda","mode":"managed","type":"aws_lambda_function","name":"example_lambda","provider_config_key":"module.lambda-file-systems:aws","expressions":{"environment":[{"variables":{"constant_value":{"greeting":"Hello"}}}],"file_system_config":[{"arn":{"references":["aws_efs_access_point.access_point_lambda.arn","aws_efs_access_point.access_point_lambda"]},"local_mount_path":{"constant_value":"/mnt/efs"}}],"filename":{"references":["data.archive_file.zip.output_path","data.archive_file.zip"]},"function_name":{"constant_value":"hello_lambda"},"handler":{"constant_value":"hello_lambda.lambda_handler"},"role":{"references":["aws_iam_role.iam_role_for_lambda.arn","aws_iam_role.iam_role_for_lambda"]},"runtime":{"constant_value":"python3.7"},"source_code_hash":{"references":["data.archive_file.zip.output_base64sha256","data.archive_file.zip"]},"timeout":{"constant_value":60},"vpc_config":[{"security_group_ids":{"references":["aws_default_security_group.default.id","aws_default_security_group.default"]},"subnet_ids":{"references":["aws_default_subnet.default_az1.id","aws_default_subnet.default_az1","aws_default_subnet.default_az2.id","aws_default_subnet.default_az2"]}}]},"schema_version":0,"depends_on":["aws_efs_mount_target.mount_target_az1","aws_efs_mount_target.mount_target_az2"]},{"address":"data.archive_file.zip","mode":"data","type":"archive_file","name":"zip","provider_config_key":"module.lambda-file-systems:archive","expressions":{"output_path":{"constant_value":"hello_lambda.zip"},"source_file":{"constant_value":"./lambda-file-systems/hello_lambda.py"},"type":{"constant_value":"zip"}},"schema_version":0},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"module.lambda-file-systems:aws","expressions":{"state":{"constant_value":"available"}},"schema_version":0},{"address":"data.aws_iam_policy.AWSLambdaVPCAccessExecutionRole","mode":"data","type":"aws_iam_policy","name":"AWSLambdaVPCAccessExecutionRole","provider_config_key":"module.lambda-file-systems:aws","expressions":{"arn":{"references":["data.aws_partition.current.partition","data.aws_partition.current"]}},"schema_version":0},{"address":"data.aws_iam_policy.AmazonElasticFileSystemClientFullAccess","mode":"data","type":"aws_iam_policy","name":"AmazonElasticFileSystemClientFullAccess","provider_config_key":"module.lambda-file-systems:aws","expressions":{"arn":{"references":["data.aws_partition.current.partition","data.aws_partition.current"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"module.lambda-file-systems:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["lambda.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":""}}]},"schema_version":0},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"module.lambda-file-systems:aws","schema_version":0}],"variables":{"aws_region":{"default":"us-east-1","description":"The AWS region to create things in."}}}},"sagemaker":{"source":"./sagemaker","module":{"resources":[{"address":"aws_iam_policy.foo","mode":"managed","type":"aws_iam_policy","name":"foo","provider_config_key":"module.sagemaker:aws","expressions":{"description":{"constant_value":"Allow SageMaker to create model"},"name":{"constant_value":"terraform-sagemaker-example"},"policy":{"references":["data.aws_iam_policy_document.foo.json","data.aws_iam_policy_document.foo"]}},"schema_version":0},{"address":"aws_iam_role.foo","mode":"managed","type":"aws_iam_role","name":"foo","provider_config_key":"module.sagemaker:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume_role.json","data.aws_iam_policy_document.assume_role"]},"name":{"constant_value":"terraform-sagemaker-example"},"path":{"constant_value":"/"}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.foo","mode":"managed","type":"aws_iam_role_policy_attachment","name":"foo","provider_config_key":"module.sagemaker:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.foo.arn","aws_iam_policy.foo"]},"role":{"references":["aws_iam_role.foo.name","aws_iam_role.foo"]}},"schema_version":0},{"address":"aws_s3_bucket.foo","mode":"managed","type":"aws_s3_bucket","name":"foo","provider_config_key":"module.sagemaker:aws","expressions":{"bucket":{"references":["random_integer.bucket_suffix.result","random_integer.bucket_suffix"]},"force_destroy":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_acl.foo_bucket_acl","mode":"managed","type":"aws_s3_bucket_acl","name":"foo_bucket_acl","provider_config_key":"module.sagemaker:aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["aws_s3_bucket.foo.id","aws_s3_bucket.foo"]}},"schema_version":0},{"address":"aws_s3_object.object","mode":"managed","type":"aws_s3_object","name":"object","provider_config_key":"module.sagemaker:aws","expressions":{"bucket":{"references":["aws_s3_bucket.foo.bucket","aws_s3_bucket.foo"]},"key":{"constant_value":"model.tar.gz"},"source":{"constant_value":"model.tar.gz"}},"schema_version":0},{"address":"aws_sagemaker_endpoint.foo","mode":"managed","type":"aws_sagemaker_endpoint","name":"foo","provider_config_key":"module.sagemaker:aws","expressions":{"endpoint_config_name":{"references":["aws_sagemaker_endpoint_configuration.foo.name","aws_sagemaker_endpoint_configuration.foo"]},"name":{"constant_value":"terraform-sagemaker-example"},"tags":{"constant_value":{"foo":"bar"}}},"schema_version":0},{"address":"aws_sagemaker_endpoint_configuration.foo","mode":"managed","type":"aws_sagemaker_endpoint_configuration","name":"foo","provider_config_key":"module.sagemaker:aws","expressions":{"name":{"constant_value":"terraform-sagemaker-example"},"production_variants":[{"initial_instance_count":{"constant_value":1},"initial_variant_weight":{"constant_value":1},"instance_type":{"constant_value":"ml.t2.medium"},"model_name":{"references":["aws_sagemaker_model.foo.name","aws_sagemaker_model.foo"]},"variant_name":{"constant_value":"variant-1"}}],"tags":{"constant_value":{"foo":"bar"}}},"schema_version":0},{"address":"aws_sagemaker_model.foo","mode":"managed","type":"aws_sagemaker_model","name":"foo","provider_config_key":"module.sagemaker:aws","expressions":{"execution_role_arn":{"references":["aws_iam_role.foo.arn","aws_iam_role.foo"]},"name":{"constant_value":"terraform-sagemaker-example"},"primary_container":[{"image":{"references":["data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","data.aws_region.current.name","data.aws_region.current"]},"model_data_url":{"references":["aws_s3_bucket.foo.bucket","aws_s3_bucket.foo"]}}],"tags":{"constant_value":{"foo":"bar"}}},"schema_version":0},{"address":"random_integer.bucket_suffix","mode":"managed","type":"random_integer","name":"bucket_suffix","provider_config_key":"module.sagemaker:random","expressions":{"max":{"constant_value":99999},"min":{"constant_value":1}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"module.sagemaker:aws","schema_version":0},{"address":"data.aws_iam_policy_document.assume_role","mode":"data","type":"aws_iam_policy_document","name":"assume_role","provider_config_key":"module.sagemaker:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["sagemaker.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.foo","mode":"data","type":"aws_iam_policy_document","name":"foo","provider_config_key":"module.sagemaker:aws","expressions":{"statement":[{"actions":{"constant_value":["sagemaker:*"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}},{"actions":{"constant_value":["cloudwatch:PutMetricData","logs:CreateLogStream","logs:PutLogEvents","logs:CreateLogGroup","logs:DescribeLogStreams","ecr:GetAuthorizationToken","ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}},{"actions":{"constant_value":["s3:GetObject"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_s3_bucket.foo.bucket","aws_s3_bucket.foo","aws_s3_bucket.foo.bucket","aws_s3_bucket.foo"]}}]},"schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"module.sagemaker:aws","schema_version":0}]}}},"variables":{"admin_cidr_ingress":{"default":"1.2.3.4/32","description":"CIDR to allow tcp/22 ingress to EC2 instance"},"key_name":{"default":"terraform-aws-provider-example","description":"The name of the EC2 Key Pair to allow SSH access to the ECS instances"}}}}},"graph":"digraph {\n\tcompound = \"true\"\n\tnewrank = \"true\"\n\tsubgraph \"root\" {\n\t\t\"[root] module.ecs-alb.aws_alb.main (expand)\" [label = \"module.ecs-alb.aws_alb.main\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_alb_listener.front_end (expand)\" [label = \"module.ecs-alb.aws_alb_listener.front_end\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_alb_target_group.test (expand)\" [label = \"module.ecs-alb.aws_alb_target_group.test\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_autoscaling_group.app (expand)\" [label = \"module.ecs-alb.aws_autoscaling_group.app\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_cloudwatch_log_group.app (expand)\" [label = \"module.ecs-alb.aws_cloudwatch_log_group.app\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_cloudwatch_log_group.ecs (expand)\" [label = \"module.ecs-alb.aws_cloudwatch_log_group.ecs\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_ecs_cluster.main (expand)\" [label = \"module.ecs-alb.aws_ecs_cluster.main\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_ecs_service.test (expand)\" [label = \"module.ecs-alb.aws_ecs_service.test\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_ecs_task_definition.ghost (expand)\" [label = \"module.ecs-alb.aws_ecs_task_definition.ghost\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_iam_instance_profile.app (expand)\" [label = \"module.ecs-alb.aws_iam_instance_profile.app\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_iam_role.app_instance (expand)\" [label = \"module.ecs-alb.aws_iam_role.app_instance\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_iam_role.ecs_service (expand)\" [label = \"module.ecs-alb.aws_iam_role.ecs_service\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_iam_role_policy.ecs_service (expand)\" [label = \"module.ecs-alb.aws_iam_role_policy.ecs_service\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_iam_role_policy.instance (expand)\" [label = \"module.ecs-alb.aws_iam_role_policy.instance\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_internet_gateway.gw (expand)\" [label = \"module.ecs-alb.aws_internet_gateway.gw\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_launch_configuration.app (expand)\" [label = \"module.ecs-alb.aws_launch_configuration.app\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_route_table.r (expand)\" [label = \"module.ecs-alb.aws_route_table.r\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_route_table_association.a (expand)\" [label = \"module.ecs-alb.aws_route_table_association.a\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_security_group.instance_sg (expand)\" [label = \"module.ecs-alb.aws_security_group.instance_sg\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_security_group.lb_sg (expand)\" [label = \"module.ecs-alb.aws_security_group.lb_sg\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_subnet.main (expand)\" [label = \"module.ecs-alb.aws_subnet.main\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.aws_vpc.main (expand)\" [label = \"module.ecs-alb.aws_vpc.main\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.data.aws_availability_zones.available (expand)\" [label = \"module.ecs-alb.data.aws_availability_zones.available\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.data.aws_region.current (expand)\" [label = \"module.ecs-alb.data.aws_region.current\", shape = \"box\"]\n\t\t\"[root] module.ecs-alb.data.aws_ssm_parameter.ecs_image_id (expand)\" [label = \"module.ecs-alb.data.aws_ssm_parameter.ecs_image_id\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_eks_cluster.demo (expand)\" [label = \"module.eks.aws_eks_cluster.demo\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_eks_node_group.demo (expand)\" [label = \"module.eks.aws_eks_node_group.demo\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_iam_role.demo-cluster (expand)\" [label = \"module.eks.aws_iam_role.demo-cluster\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_iam_role.demo-node (expand)\" [label = \"module.eks.aws_iam_role.demo-node\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_iam_role_policy_attachment.demo-cluster-AmazonEKSClusterPolicy (expand)\" [label = \"module.eks.aws_iam_role_policy_attachment.demo-cluster-AmazonEKSClusterPolicy\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_iam_role_policy_attachment.demo-cluster-AmazonEKSVPCResourceController (expand)\" [label = \"module.eks.aws_iam_role_policy_attachment.demo-cluster-AmazonEKSVPCResourceController\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEC2ContainerRegistryReadOnly (expand)\" [label = \"module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEC2ContainerRegistryReadOnly\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEKSWorkerNodePolicy (expand)\" [label = \"module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEKSWorkerNodePolicy\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEKS_CNI_Policy (expand)\" [label = \"module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEKS_CNI_Policy\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_internet_gateway.demo (expand)\" [label = \"module.eks.aws_internet_gateway.demo\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_route_table.demo (expand)\" [label = \"module.eks.aws_route_table.demo\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_route_table_association.demo (expand)\" [label = \"module.eks.aws_route_table_association.demo\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_security_group.demo-cluster (expand)\" [label = \"module.eks.aws_security_group.demo-cluster\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_security_group_rule.demo-cluster-ingress-workstation-https (expand)\" [label = \"module.eks.aws_security_group_rule.demo-cluster-ingress-workstation-https\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_subnet.demo (expand)\" [label = \"module.eks.aws_subnet.demo\", shape = \"box\"]\n\t\t\"[root] module.eks.aws_vpc.demo (expand)\" [label = \"module.eks.aws_vpc.demo\", shape = \"box\"]\n\t\t\"[root] module.eks.data.aws_availability_zones.available (expand)\" [label = \"module.eks.data.aws_availability_zones.available\", shape = \"box\"]\n\t\t\"[root] module.eks.data.http.workstation-external-ip (expand)\" [label = \"module.eks.data.http.workstation-external-ip\", shape = \"box\"]\n\t\t\"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" [label = \"module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\", shape = \"diamond\"]\n\t\t\"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/http\\\"]\" [label = \"module.eks.provider[\\\"registry.terraform.io/hashicorp/http\\\"]\", shape = \"diamond\"]\n\t\t\"[root] module.elb.aws_elb.web (expand)\" [label = \"module.elb.aws_elb.web\", shape = \"box\"]\n\t\t\"[root] module.elb.aws_instance.web (expand)\" [label = \"module.elb.aws_instance.web\", shape = \"box\"]\n\t\t\"[root] module.elb.aws_internet_gateway.gw (expand)\" [label = \"module.elb.aws_internet_gateway.gw\", shape = \"box\"]\n\t\t\"[root] module.elb.aws_lb_cookie_stickiness_policy.default (expand)\" [label = \"module.elb.aws_lb_cookie_stickiness_policy.default\", shape = \"box\"]\n\t\t\"[root] module.elb.aws_route_table.r (expand)\" [label = \"module.elb.aws_route_table.r\", shape = \"box\"]\n\t\t\"[root] module.elb.aws_route_table_association.a (expand)\" [label = \"module.elb.aws_route_table_association.a\", shape = \"box\"]\n\t\t\"[root] module.elb.aws_security_group.default (expand)\" [label = \"module.elb.aws_security_group.default\", shape = \"box\"]\n\t\t\"[root] module.elb.aws_security_group.elb (expand)\" [label = \"module.elb.aws_security_group.elb\", shape = \"box\"]\n\t\t\"[root] module.elb.aws_subnet.tf_test_subnet (expand)\" [label = \"module.elb.aws_subnet.tf_test_subnet\", shape = \"box\"]\n\t\t\"[root] module.elb.aws_vpc.default (expand)\" [label = \"module.elb.aws_vpc.default\", shape = \"box\"]\n\t\t\"[root] module.elb.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" [label = \"module.elb.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\", shape = \"diamond\"]\n\t\t\"[root] module.lambda-file-systems.aws_default_security_group.default (expand)\" [label = \"module.lambda-file-systems.aws_default_security_group.default\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_default_subnet.default_az1 (expand)\" [label = \"module.lambda-file-systems.aws_default_subnet.default_az1\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_default_subnet.default_az2 (expand)\" [label = \"module.lambda-file-systems.aws_default_subnet.default_az2\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_default_vpc.default (expand)\" [label = \"module.lambda-file-systems.aws_default_vpc.default\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_efs_access_point.access_point_lambda (expand)\" [label = \"module.lambda-file-systems.aws_efs_access_point.access_point_lambda\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_efs_file_system.efs_for_lambda (expand)\" [label = \"module.lambda-file-systems.aws_efs_file_system.efs_for_lambda\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_efs_mount_target.mount_target_az1 (expand)\" [label = \"module.lambda-file-systems.aws_efs_mount_target.mount_target_az1\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_efs_mount_target.mount_target_az2 (expand)\" [label = \"module.lambda-file-systems.aws_efs_mount_target.mount_target_az2\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_iam_role.iam_role_for_lambda (expand)\" [label = \"module.lambda-file-systems.aws_iam_role.iam_role_for_lambda\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_iam_role_policy_attachment.AWSLambdaVPCAccessExecutionRole-attach (expand)\" [label = \"module.lambda-file-systems.aws_iam_role_policy_attachment.AWSLambdaVPCAccessExecutionRole-attach\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_iam_role_policy_attachment.AmazonElasticFileSystemClientFullAccess-attach (expand)\" [label = \"module.lambda-file-systems.aws_iam_role_policy_attachment.AmazonElasticFileSystemClientFullAccess-attach\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.aws_lambda_function.example_lambda (expand)\" [label = \"module.lambda-file-systems.aws_lambda_function.example_lambda\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.data.archive_file.zip (expand)\" [label = \"module.lambda-file-systems.data.archive_file.zip\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.data.aws_availability_zones.available (expand)\" [label = \"module.lambda-file-systems.data.aws_availability_zones.available\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.data.aws_iam_policy.AWSLambdaVPCAccessExecutionRole (expand)\" [label = \"module.lambda-file-systems.data.aws_iam_policy.AWSLambdaVPCAccessExecutionRole\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.data.aws_iam_policy.AmazonElasticFileSystemClientFullAccess (expand)\" [label = \"module.lambda-file-systems.data.aws_iam_policy.AmazonElasticFileSystemClientFullAccess\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.data.aws_iam_policy_document.assume_role_policy (expand)\" [label = \"module.lambda-file-systems.data.aws_iam_policy_document.assume_role_policy\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.data.aws_partition.current (expand)\" [label = \"module.lambda-file-systems.data.aws_partition.current\", shape = \"box\"]\n\t\t\"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/archive\\\"]\" [label = \"module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/archive\\\"]\", shape = \"diamond\"]\n\t\t\"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" [label = \"module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\", shape = \"diamond\"]\n\t\t\"[root] module.sagemaker.aws_iam_policy.foo (expand)\" [label = \"module.sagemaker.aws_iam_policy.foo\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.aws_iam_role.foo (expand)\" [label = \"module.sagemaker.aws_iam_role.foo\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.aws_iam_role_policy_attachment.foo (expand)\" [label = \"module.sagemaker.aws_iam_role_policy_attachment.foo\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.aws_s3_bucket.foo (expand)\" [label = \"module.sagemaker.aws_s3_bucket.foo\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.aws_s3_bucket_acl.foo_bucket_acl (expand)\" [label = \"module.sagemaker.aws_s3_bucket_acl.foo_bucket_acl\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.aws_s3_object.object (expand)\" [label = \"module.sagemaker.aws_s3_object.object\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.aws_sagemaker_endpoint.foo (expand)\" [label = \"module.sagemaker.aws_sagemaker_endpoint.foo\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.aws_sagemaker_endpoint_configuration.foo (expand)\" [label = \"module.sagemaker.aws_sagemaker_endpoint_configuration.foo\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.aws_sagemaker_model.foo (expand)\" [label = \"module.sagemaker.aws_sagemaker_model.foo\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.data.aws_caller_identity.current (expand)\" [label = \"module.sagemaker.data.aws_caller_identity.current\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.data.aws_iam_policy_document.assume_role (expand)\" [label = \"module.sagemaker.data.aws_iam_policy_document.assume_role\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.data.aws_iam_policy_document.foo (expand)\" [label = \"module.sagemaker.data.aws_iam_policy_document.foo\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.data.aws_region.current (expand)\" [label = \"module.sagemaker.data.aws_region.current\", shape = \"box\"]\n\t\t\"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" [label = \"module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\", shape = \"diamond\"]\n\t\t\"[root] module.sagemaker.random_integer.bucket_suffix (expand)\" [label = \"module.sagemaker.random_integer.bucket_suffix\", shape = \"box\"]\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" [label = \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\", shape = \"diamond\"]\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/random\\\"]\" [label = \"provider[\\\"registry.terraform.io/hashicorp/random\\\"]\", shape = \"diamond\"]\n\t\t\"[root] var.admin_cidr_ingress\" [label = \"var.admin_cidr_ingress\", shape = \"note\"]\n\t\t\"[root] var.key_name\" [label = \"var.key_name\", shape = \"note\"]\n\t\t\"[root] module.ecs-alb (close)\" -> \"[root] module.ecs-alb.aws_ecs_service.test (expand)\"\n\t\t\"[root] module.ecs-alb (close)\" -> \"[root] module.ecs-alb.aws_iam_role_policy.instance (expand)\"\n\t\t\"[root] module.ecs-alb (close)\" -> \"[root] module.ecs-alb.aws_route_table_association.a (expand)\"\n\t\t\"[root] module.ecs-alb (close)\" -> \"[root] module.ecs-alb.output.asg_name (expand)\"\n\t\t\"[root] module.ecs-alb (close)\" -> \"[root] module.ecs-alb.output.elb_hostname (expand)\"\n\t\t\"[root] module.ecs-alb (close)\" -> \"[root] module.ecs-alb.output.instance_security_group (expand)\"\n\t\t\"[root] module.ecs-alb (close)\" -> \"[root] module.ecs-alb.output.launch_configuration (expand)\"\n\t\t\"[root] module.ecs-alb.aws_alb.main (expand)\" -> \"[root] module.ecs-alb.aws_security_group.lb_sg (expand)\"\n\t\t\"[root] module.ecs-alb.aws_alb.main (expand)\" -> \"[root] module.ecs-alb.aws_subnet.main (expand)\"\n\t\t\"[root] module.ecs-alb.aws_alb_listener.front_end (expand)\" -> \"[root] module.ecs-alb.aws_alb.main (expand)\"\n\t\t\"[root] module.ecs-alb.aws_alb_listener.front_end (expand)\" -> \"[root] module.ecs-alb.aws_alb_target_group.test (expand)\"\n\t\t\"[root] module.ecs-alb.aws_alb_target_group.test (expand)\" -> \"[root] module.ecs-alb.aws_vpc.main (expand)\"\n\t\t\"[root] module.ecs-alb.aws_autoscaling_group.app (expand)\" -> \"[root] module.ecs-alb.aws_launch_configuration.app (expand)\"\n\t\t\"[root] module.ecs-alb.aws_autoscaling_group.app (expand)\" -> \"[root] module.ecs-alb.aws_subnet.main (expand)\"\n\t\t\"[root] module.ecs-alb.aws_autoscaling_group.app (expand)\" -> \"[root] module.ecs-alb.var.asg_desired (expand)\"\n\t\t\"[root] module.ecs-alb.aws_autoscaling_group.app (expand)\" -> \"[root] module.ecs-alb.var.asg_max (expand)\"\n\t\t\"[root] module.ecs-alb.aws_autoscaling_group.app (expand)\" -> \"[root] module.ecs-alb.var.asg_min (expand)\"\n\t\t\"[root] module.ecs-alb.aws_cloudwatch_log_group.app (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.aws_cloudwatch_log_group.app (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.ecs-alb.aws_cloudwatch_log_group.ecs (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.aws_cloudwatch_log_group.ecs (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.ecs-alb.aws_ecs_cluster.main (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.aws_ecs_cluster.main (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.ecs-alb.aws_ecs_service.test (expand)\" -> \"[root] module.ecs-alb.aws_alb_listener.front_end (expand)\"\n\t\t\"[root] module.ecs-alb.aws_ecs_service.test (expand)\" -> \"[root] module.ecs-alb.aws_ecs_cluster.main (expand)\"\n\t\t\"[root] module.ecs-alb.aws_ecs_service.test (expand)\" -> \"[root] module.ecs-alb.aws_ecs_task_definition.ghost (expand)\"\n\t\t\"[root] module.ecs-alb.aws_ecs_service.test (expand)\" -> \"[root] module.ecs-alb.aws_iam_role_policy.ecs_service (expand)\"\n\t\t\"[root] module.ecs-alb.aws_ecs_service.test (expand)\" -> \"[root] module.ecs-alb.var.service_desired (expand)\"\n\t\t\"[root] module.ecs-alb.aws_ecs_task_definition.ghost (expand)\" -> \"[root] module.ecs-alb.aws_cloudwatch_log_group.app (expand)\"\n\t\t\"[root] module.ecs-alb.aws_ecs_task_definition.ghost (expand)\" -> \"[root] module.ecs-alb.data.aws_region.current (expand)\"\n\t\t\"[root] module.ecs-alb.aws_iam_instance_profile.app (expand)\" -> \"[root] module.ecs-alb.aws_iam_role.app_instance (expand)\"\n\t\t\"[root] module.ecs-alb.aws_iam_role.app_instance (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.aws_iam_role.app_instance (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.ecs-alb.aws_iam_role.ecs_service (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.aws_iam_role.ecs_service (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.ecs-alb.aws_iam_role_policy.ecs_service (expand)\" -> \"[root] module.ecs-alb.aws_iam_role.ecs_service (expand)\"\n\t\t\"[root] module.ecs-alb.aws_iam_role_policy.instance (expand)\" -> \"[root] module.ecs-alb.aws_cloudwatch_log_group.app (expand)\"\n\t\t\"[root] module.ecs-alb.aws_iam_role_policy.instance (expand)\" -> \"[root] module.ecs-alb.aws_cloudwatch_log_group.ecs (expand)\"\n\t\t\"[root] module.ecs-alb.aws_iam_role_policy.instance (expand)\" -> \"[root] module.ecs-alb.aws_iam_role.app_instance (expand)\"\n\t\t\"[root] module.ecs-alb.aws_internet_gateway.gw (expand)\" -> \"[root] module.ecs-alb.aws_vpc.main (expand)\"\n\t\t\"[root] module.ecs-alb.aws_launch_configuration.app (expand)\" -> \"[root] module.ecs-alb.aws_cloudwatch_log_group.ecs (expand)\"\n\t\t\"[root] module.ecs-alb.aws_launch_configuration.app (expand)\" -> \"[root] module.ecs-alb.aws_ecs_cluster.main (expand)\"\n\t\t\"[root] module.ecs-alb.aws_launch_configuration.app (expand)\" -> \"[root] module.ecs-alb.aws_iam_instance_profile.app (expand)\"\n\t\t\"[root] module.ecs-alb.aws_launch_configuration.app (expand)\" -> \"[root] module.ecs-alb.aws_security_group.instance_sg (expand)\"\n\t\t\"[root] module.ecs-alb.aws_launch_configuration.app (expand)\" -> \"[root] module.ecs-alb.data.aws_region.current (expand)\"\n\t\t\"[root] module.ecs-alb.aws_launch_configuration.app (expand)\" -> \"[root] module.ecs-alb.data.aws_ssm_parameter.ecs_image_id (expand)\"\n\t\t\"[root] module.ecs-alb.aws_launch_configuration.app (expand)\" -> \"[root] module.ecs-alb.var.instance_type (expand)\"\n\t\t\"[root] module.ecs-alb.aws_route_table.r (expand)\" -> \"[root] module.ecs-alb.aws_internet_gateway.gw (expand)\"\n\t\t\"[root] module.ecs-alb.aws_route_table_association.a (expand)\" -> \"[root] module.ecs-alb.aws_route_table.r (expand)\"\n\t\t\"[root] module.ecs-alb.aws_route_table_association.a (expand)\" -> \"[root] module.ecs-alb.aws_subnet.main (expand)\"\n\t\t\"[root] module.ecs-alb.aws_security_group.instance_sg (expand)\" -> \"[root] module.ecs-alb.aws_security_group.lb_sg (expand)\"\n\t\t\"[root] module.ecs-alb.aws_security_group.instance_sg (expand)\" -> \"[root] module.ecs-alb.var.admin_cidr_ingress (expand)\"\n\t\t\"[root] module.ecs-alb.aws_security_group.lb_sg (expand)\" -> \"[root] module.ecs-alb.aws_vpc.main (expand)\"\n\t\t\"[root] module.ecs-alb.aws_subnet.main (expand)\" -> \"[root] module.ecs-alb.aws_vpc.main (expand)\"\n\t\t\"[root] module.ecs-alb.aws_subnet.main (expand)\" -> \"[root] module.ecs-alb.data.aws_availability_zones.available (expand)\"\n\t\t\"[root] module.ecs-alb.aws_subnet.main (expand)\" -> \"[root] module.ecs-alb.var.az_count (expand)\"\n\t\t\"[root] module.ecs-alb.aws_vpc.main (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.aws_vpc.main (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.ecs-alb.data.aws_availability_zones.available (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.data.aws_availability_zones.available (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.ecs-alb.data.aws_region.current (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.data.aws_region.current (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.ecs-alb.data.aws_ssm_parameter.ecs_image_id (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.data.aws_ssm_parameter.ecs_image_id (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.ecs-alb.output.asg_name (expand)\" -> \"[root] module.ecs-alb.aws_autoscaling_group.app (expand)\"\n\t\t\"[root] module.ecs-alb.output.elb_hostname (expand)\" -> \"[root] module.ecs-alb.aws_alb.main (expand)\"\n\t\t\"[root] module.ecs-alb.output.instance_security_group (expand)\" -> \"[root] module.ecs-alb.aws_security_group.instance_sg (expand)\"\n\t\t\"[root] module.ecs-alb.output.launch_configuration (expand)\" -> \"[root] module.ecs-alb.aws_launch_configuration.app (expand)\"\n\t\t\"[root] module.ecs-alb.var.admin_cidr_ingress (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.var.admin_cidr_ingress (expand)\" -> \"[root] var.admin_cidr_ingress\"\n\t\t\"[root] module.ecs-alb.var.asg_desired (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.var.asg_max (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.var.asg_min (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.var.az_count (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.var.instance_type (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.ecs-alb.var.service_desired (expand)\" -> \"[root] module.ecs-alb (expand)\"\n\t\t\"[root] module.eks (close)\" -> \"[root] module.eks.aws_eks_node_group.demo (expand)\"\n\t\t\"[root] module.eks (close)\" -> \"[root] module.eks.aws_route_table_association.demo (expand)\"\n\t\t\"[root] module.eks (close)\" -> \"[root] module.eks.aws_security_group_rule.demo-cluster-ingress-workstation-https (expand)\"\n\t\t\"[root] module.eks (close)\" -> \"[root] module.eks.output.config_map_aws_auth (expand)\"\n\t\t\"[root] module.eks (close)\" -> \"[root] module.eks.output.kubeconfig (expand)\"\n\t\t\"[root] module.eks.aws_eks_cluster.demo (expand)\" -> \"[root] module.eks.aws_iam_role_policy_attachment.demo-cluster-AmazonEKSClusterPolicy (expand)\"\n\t\t\"[root] module.eks.aws_eks_cluster.demo (expand)\" -> \"[root] module.eks.aws_iam_role_policy_attachment.demo-cluster-AmazonEKSVPCResourceController (expand)\"\n\t\t\"[root] module.eks.aws_eks_cluster.demo (expand)\" -> \"[root] module.eks.aws_security_group.demo-cluster (expand)\"\n\t\t\"[root] module.eks.aws_eks_cluster.demo (expand)\" -> \"[root] module.eks.aws_subnet.demo (expand)\"\n\t\t\"[root] module.eks.aws_eks_node_group.demo (expand)\" -> \"[root] module.eks.aws_eks_cluster.demo (expand)\"\n\t\t\"[root] module.eks.aws_eks_node_group.demo (expand)\" -> \"[root] module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEC2ContainerRegistryReadOnly (expand)\"\n\t\t\"[root] module.eks.aws_eks_node_group.demo (expand)\" -> \"[root] module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEKSWorkerNodePolicy (expand)\"\n\t\t\"[root] module.eks.aws_eks_node_group.demo (expand)\" -> \"[root] module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEKS_CNI_Policy (expand)\"\n\t\t\"[root] module.eks.aws_iam_role.demo-cluster (expand)\" -> \"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.eks.aws_iam_role.demo-node (expand)\" -> \"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.eks.aws_iam_role_policy_attachment.demo-cluster-AmazonEKSClusterPolicy (expand)\" -> \"[root] module.eks.aws_iam_role.demo-cluster (expand)\"\n\t\t\"[root] module.eks.aws_iam_role_policy_attachment.demo-cluster-AmazonEKSVPCResourceController (expand)\" -> \"[root] module.eks.aws_iam_role.demo-cluster (expand)\"\n\t\t\"[root] module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEC2ContainerRegistryReadOnly (expand)\" -> \"[root] module.eks.aws_iam_role.demo-node (expand)\"\n\t\t\"[root] module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEKSWorkerNodePolicy (expand)\" -> \"[root] module.eks.aws_iam_role.demo-node (expand)\"\n\t\t\"[root] module.eks.aws_iam_role_policy_attachment.demo-node-AmazonEKS_CNI_Policy (expand)\" -> \"[root] module.eks.aws_iam_role.demo-node (expand)\"\n\t\t\"[root] module.eks.aws_internet_gateway.demo (expand)\" -> \"[root] module.eks.aws_vpc.demo (expand)\"\n\t\t\"[root] module.eks.aws_route_table.demo (expand)\" -> \"[root] module.eks.aws_internet_gateway.demo (expand)\"\n\t\t\"[root] module.eks.aws_route_table_association.demo (expand)\" -> \"[root] module.eks.aws_route_table.demo (expand)\"\n\t\t\"[root] module.eks.aws_route_table_association.demo (expand)\" -> \"[root] module.eks.aws_subnet.demo (expand)\"\n\t\t\"[root] module.eks.aws_security_group.demo-cluster (expand)\" -> \"[root] module.eks.aws_vpc.demo (expand)\"\n\t\t\"[root] module.eks.aws_security_group_rule.demo-cluster-ingress-workstation-https (expand)\" -> \"[root] module.eks.aws_security_group.demo-cluster (expand)\"\n\t\t\"[root] module.eks.aws_security_group_rule.demo-cluster-ingress-workstation-https (expand)\" -> \"[root] module.eks.local.workstation-external-cidr (expand)\"\n\t\t\"[root] module.eks.aws_subnet.demo (expand)\" -> \"[root] module.eks.aws_vpc.demo (expand)\"\n\t\t\"[root] module.eks.aws_subnet.demo (expand)\" -> \"[root] module.eks.data.aws_availability_zones.available (expand)\"\n\t\t\"[root] module.eks.aws_vpc.demo (expand)\" -> \"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.eks.aws_vpc.demo (expand)\" -> \"[root] module.eks.var.cluster_name (expand)\"\n\t\t\"[root] module.eks.data.aws_availability_zones.available (expand)\" -> \"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.eks.data.http.workstation-external-ip (expand)\" -> \"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/http\\\"]\"\n\t\t\"[root] module.eks.local.config_map_aws_auth (expand)\" -> \"[root] module.eks.aws_iam_role.demo-node (expand)\"\n\t\t\"[root] module.eks.local.kubeconfig (expand)\" -> \"[root] module.eks.aws_eks_cluster.demo (expand)\"\n\t\t\"[root] module.eks.local.workstation-external-cidr (expand)\" -> \"[root] module.eks.data.http.workstation-external-ip (expand)\"\n\t\t\"[root] module.eks.output.config_map_aws_auth (expand)\" -> \"[root] module.eks.local.config_map_aws_auth (expand)\"\n\t\t\"[root] module.eks.output.kubeconfig (expand)\" -> \"[root] module.eks.local.kubeconfig (expand)\"\n\t\t\"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.eks.aws_eks_node_group.demo (expand)\"\n\t\t\"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.eks.aws_route_table_association.demo (expand)\"\n\t\t\"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.eks.aws_security_group_rule.demo-cluster-ingress-workstation-https (expand)\"\n\t\t\"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" -> \"[root] module.eks.var.aws_region (expand)\"\n\t\t\"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/http\\\"] (close)\" -> \"[root] module.eks.data.http.workstation-external-ip (expand)\"\n\t\t\"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/http\\\"]\" -> \"[root] module.eks (expand)\"\n\t\t\"[root] module.eks.var.aws_region (expand)\" -> \"[root] module.eks (expand)\"\n\t\t\"[root] module.eks.var.cluster_name (expand)\" -> \"[root] module.eks (expand)\"\n\t\t\"[root] module.elb (close)\" -> \"[root] module.elb.aws_lb_cookie_stickiness_policy.default (expand)\"\n\t\t\"[root] module.elb (close)\" -> \"[root] module.elb.aws_route_table_association.a (expand)\"\n\t\t\"[root] module.elb (close)\" -> \"[root] module.elb.output.address (expand)\"\n\t\t\"[root] module.elb.aws_elb.web (expand)\" -> \"[root] module.elb.aws_instance.web (expand)\"\n\t\t\"[root] module.elb.aws_elb.web (expand)\" -> \"[root] module.elb.aws_security_group.elb (expand)\"\n\t\t\"[root] module.elb.aws_instance.web (expand)\" -> \"[root] module.elb.aws_security_group.default (expand)\"\n\t\t\"[root] module.elb.aws_instance.web (expand)\" -> \"[root] module.elb.aws_subnet.tf_test_subnet (expand)\"\n\t\t\"[root] module.elb.aws_instance.web (expand)\" -> \"[root] module.elb.var.aws_amis (expand)\"\n\t\t\"[root] module.elb.aws_instance.web (expand)\" -> \"[root] module.elb.var.key_name (expand)\"\n\t\t\"[root] module.elb.aws_internet_gateway.gw (expand)\" -> \"[root] module.elb.aws_vpc.default (expand)\"\n\t\t\"[root] module.elb.aws_lb_cookie_stickiness_policy.default (expand)\" -> \"[root] module.elb.aws_elb.web (expand)\"\n\t\t\"[root] module.elb.aws_route_table.r (expand)\" -> \"[root] module.elb.aws_internet_gateway.gw (expand)\"\n\t\t\"[root] module.elb.aws_route_table_association.a (expand)\" -> \"[root] module.elb.aws_route_table.r (expand)\"\n\t\t\"[root] module.elb.aws_route_table_association.a (expand)\" -> \"[root] module.elb.aws_subnet.tf_test_subnet (expand)\"\n\t\t\"[root] module.elb.aws_security_group.default (expand)\" -> \"[root] module.elb.aws_vpc.default (expand)\"\n\t\t\"[root] module.elb.aws_security_group.elb (expand)\" -> \"[root] module.elb.aws_internet_gateway.gw (expand)\"\n\t\t\"[root] module.elb.aws_subnet.tf_test_subnet (expand)\" -> \"[root] module.elb.aws_vpc.default (expand)\"\n\t\t\"[root] module.elb.aws_vpc.default (expand)\" -> \"[root] module.elb.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.elb.output.address (expand)\" -> \"[root] module.elb.aws_elb.web (expand)\"\n\t\t\"[root] module.elb.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.elb.aws_lb_cookie_stickiness_policy.default (expand)\"\n\t\t\"[root] module.elb.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.elb.aws_route_table_association.a (expand)\"\n\t\t\"[root] module.elb.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" -> \"[root] module.elb.var.aws_region (expand)\"\n\t\t\"[root] module.elb.var.aws_amis (expand)\" -> \"[root] module.elb (expand)\"\n\t\t\"[root] module.elb.var.aws_region (expand)\" -> \"[root] module.elb (expand)\"\n\t\t\"[root] module.elb.var.key_name (expand)\" -> \"[root] module.elb (expand)\"\n\t\t\"[root] module.elb.var.key_name (expand)\" -> \"[root] var.key_name\"\n\t\t\"[root] module.lambda-file-systems (close)\" -> \"[root] module.lambda-file-systems.aws_iam_role_policy_attachment.AWSLambdaVPCAccessExecutionRole-attach (expand)\"\n\t\t\"[root] module.lambda-file-systems (close)\" -> \"[root] module.lambda-file-systems.aws_iam_role_policy_attachment.AmazonElasticFileSystemClientFullAccess-attach (expand)\"\n\t\t\"[root] module.lambda-file-systems (close)\" -> \"[root] module.lambda-file-systems.output.lambda (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_default_security_group.default (expand)\" -> \"[root] module.lambda-file-systems.aws_default_vpc.default (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_default_subnet.default_az1 (expand)\" -> \"[root] module.lambda-file-systems.data.aws_availability_zones.available (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_default_subnet.default_az2 (expand)\" -> \"[root] module.lambda-file-systems.data.aws_availability_zones.available (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_default_vpc.default (expand)\" -> \"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.lambda-file-systems.aws_efs_access_point.access_point_lambda (expand)\" -> \"[root] module.lambda-file-systems.aws_efs_file_system.efs_for_lambda (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_efs_file_system.efs_for_lambda (expand)\" -> \"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.lambda-file-systems.aws_efs_mount_target.mount_target_az1 (expand)\" -> \"[root] module.lambda-file-systems.aws_default_security_group.default (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_efs_mount_target.mount_target_az1 (expand)\" -> \"[root] module.lambda-file-systems.aws_default_subnet.default_az1 (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_efs_mount_target.mount_target_az1 (expand)\" -> \"[root] module.lambda-file-systems.aws_efs_file_system.efs_for_lambda (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_efs_mount_target.mount_target_az2 (expand)\" -> \"[root] module.lambda-file-systems.aws_default_security_group.default (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_efs_mount_target.mount_target_az2 (expand)\" -> \"[root] module.lambda-file-systems.aws_default_subnet.default_az2 (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_efs_mount_target.mount_target_az2 (expand)\" -> \"[root] module.lambda-file-systems.aws_efs_file_system.efs_for_lambda (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_iam_role.iam_role_for_lambda (expand)\" -> \"[root] module.lambda-file-systems.data.aws_iam_policy_document.assume_role_policy (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_iam_role_policy_attachment.AWSLambdaVPCAccessExecutionRole-attach (expand)\" -> \"[root] module.lambda-file-systems.aws_iam_role.iam_role_for_lambda (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_iam_role_policy_attachment.AWSLambdaVPCAccessExecutionRole-attach (expand)\" -> \"[root] module.lambda-file-systems.data.aws_iam_policy.AWSLambdaVPCAccessExecutionRole (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_iam_role_policy_attachment.AmazonElasticFileSystemClientFullAccess-attach (expand)\" -> \"[root] module.lambda-file-systems.aws_iam_role.iam_role_for_lambda (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_iam_role_policy_attachment.AmazonElasticFileSystemClientFullAccess-attach (expand)\" -> \"[root] module.lambda-file-systems.data.aws_iam_policy.AmazonElasticFileSystemClientFullAccess (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_lambda_function.example_lambda (expand)\" -> \"[root] module.lambda-file-systems.aws_efs_access_point.access_point_lambda (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_lambda_function.example_lambda (expand)\" -> \"[root] module.lambda-file-systems.aws_efs_mount_target.mount_target_az1 (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_lambda_function.example_lambda (expand)\" -> \"[root] module.lambda-file-systems.aws_efs_mount_target.mount_target_az2 (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_lambda_function.example_lambda (expand)\" -> \"[root] module.lambda-file-systems.aws_iam_role.iam_role_for_lambda (expand)\"\n\t\t\"[root] module.lambda-file-systems.aws_lambda_function.example_lambda (expand)\" -> \"[root] module.lambda-file-systems.data.archive_file.zip (expand)\"\n\t\t\"[root] module.lambda-file-systems.data.archive_file.zip (expand)\" -> \"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/archive\\\"]\"\n\t\t\"[root] module.lambda-file-systems.data.aws_availability_zones.available (expand)\" -> \"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.lambda-file-systems.data.aws_iam_policy.AWSLambdaVPCAccessExecutionRole (expand)\" -> \"[root] module.lambda-file-systems.data.aws_partition.current (expand)\"\n\t\t\"[root] module.lambda-file-systems.data.aws_iam_policy.AmazonElasticFileSystemClientFullAccess (expand)\" -> \"[root] module.lambda-file-systems.data.aws_partition.current (expand)\"\n\t\t\"[root] module.lambda-file-systems.data.aws_iam_policy_document.assume_role_policy (expand)\" -> \"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.lambda-file-systems.data.aws_partition.current (expand)\" -> \"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.lambda-file-systems.output.lambda (expand)\" -> \"[root] module.lambda-file-systems.aws_lambda_function.example_lambda (expand)\"\n\t\t\"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/archive\\\"] (close)\" -> \"[root] module.lambda-file-systems.data.archive_file.zip (expand)\"\n\t\t\"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/archive\\\"]\" -> \"[root] module.lambda-file-systems (expand)\"\n\t\t\"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.lambda-file-systems.aws_iam_role_policy_attachment.AWSLambdaVPCAccessExecutionRole-attach (expand)\"\n\t\t\"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.lambda-file-systems.aws_iam_role_policy_attachment.AmazonElasticFileSystemClientFullAccess-attach (expand)\"\n\t\t\"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.lambda-file-systems.aws_lambda_function.example_lambda (expand)\"\n\t\t\"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" -> \"[root] module.lambda-file-systems.var.aws_region (expand)\"\n\t\t\"[root] module.lambda-file-systems.var.aws_region (expand)\" -> \"[root] module.lambda-file-systems (expand)\"\n\t\t\"[root] module.sagemaker (close)\" -> \"[root] module.sagemaker.aws_iam_role_policy_attachment.foo (expand)\"\n\t\t\"[root] module.sagemaker (close)\" -> \"[root] module.sagemaker.aws_s3_bucket_acl.foo_bucket_acl (expand)\"\n\t\t\"[root] module.sagemaker (close)\" -> \"[root] module.sagemaker.aws_s3_object.object (expand)\"\n\t\t\"[root] module.sagemaker (close)\" -> \"[root] module.sagemaker.aws_sagemaker_endpoint.foo (expand)\"\n\t\t\"[root] module.sagemaker.aws_iam_policy.foo (expand)\" -> \"[root] module.sagemaker.data.aws_iam_policy_document.foo (expand)\"\n\t\t\"[root] module.sagemaker.aws_iam_role.foo (expand)\" -> \"[root] module.sagemaker.data.aws_iam_policy_document.assume_role (expand)\"\n\t\t\"[root] module.sagemaker.aws_iam_role_policy_attachment.foo (expand)\" -> \"[root] module.sagemaker.aws_iam_policy.foo (expand)\"\n\t\t\"[root] module.sagemaker.aws_iam_role_policy_attachment.foo (expand)\" -> \"[root] module.sagemaker.aws_iam_role.foo (expand)\"\n\t\t\"[root] module.sagemaker.aws_s3_bucket.foo (expand)\" -> \"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.sagemaker.aws_s3_bucket.foo (expand)\" -> \"[root] module.sagemaker.random_integer.bucket_suffix (expand)\"\n\t\t\"[root] module.sagemaker.aws_s3_bucket_acl.foo_bucket_acl (expand)\" -> \"[root] module.sagemaker.aws_s3_bucket.foo (expand)\"\n\t\t\"[root] module.sagemaker.aws_s3_object.object (expand)\" -> \"[root] module.sagemaker.aws_s3_bucket.foo (expand)\"\n\t\t\"[root] module.sagemaker.aws_sagemaker_endpoint.foo (expand)\" -> \"[root] module.sagemaker.aws_sagemaker_endpoint_configuration.foo (expand)\"\n\t\t\"[root] module.sagemaker.aws_sagemaker_endpoint_configuration.foo (expand)\" -> \"[root] module.sagemaker.aws_sagemaker_model.foo (expand)\"\n\t\t\"[root] module.sagemaker.aws_sagemaker_model.foo (expand)\" -> \"[root] module.sagemaker.aws_iam_role.foo (expand)\"\n\t\t\"[root] module.sagemaker.aws_sagemaker_model.foo (expand)\" -> \"[root] module.sagemaker.aws_s3_bucket.foo (expand)\"\n\t\t\"[root] module.sagemaker.aws_sagemaker_model.foo (expand)\" -> \"[root] module.sagemaker.data.aws_caller_identity.current (expand)\"\n\t\t\"[root] module.sagemaker.aws_sagemaker_model.foo (expand)\" -> \"[root] module.sagemaker.data.aws_region.current (expand)\"\n\t\t\"[root] module.sagemaker.data.aws_caller_identity.current (expand)\" -> \"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.sagemaker.data.aws_iam_policy_document.assume_role (expand)\" -> \"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.sagemaker.data.aws_iam_policy_document.foo (expand)\" -> \"[root] module.sagemaker.aws_s3_bucket.foo (expand)\"\n\t\t\"[root] module.sagemaker.data.aws_region.current (expand)\" -> \"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.sagemaker.aws_iam_role_policy_attachment.foo (expand)\"\n\t\t\"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.sagemaker.aws_s3_bucket_acl.foo_bucket_acl (expand)\"\n\t\t\"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.sagemaker.aws_s3_object.object (expand)\"\n\t\t\"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.sagemaker.aws_sagemaker_endpoint.foo (expand)\"\n\t\t\"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" -> \"[root] module.sagemaker (expand)\"\n\t\t\"[root] module.sagemaker.random_integer.bucket_suffix (expand)\" -> \"[root] module.sagemaker (expand)\"\n\t\t\"[root] module.sagemaker.random_integer.bucket_suffix (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/random\\\"]\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.ecs-alb.aws_autoscaling_group.app (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.ecs-alb.aws_ecs_service.test (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.ecs-alb.aws_iam_role_policy.instance (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] module.ecs-alb.aws_route_table_association.a (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/random\\\"] (close)\" -> \"[root] module.sagemaker.random_integer.bucket_suffix (expand)\"\n\t\t\"[root] root\" -> \"[root] module.ecs-alb (close)\"\n\t\t\"[root] root\" -> \"[root] module.eks (close)\"\n\t\t\"[root] root\" -> \"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\"\n\t\t\"[root] root\" -> \"[root] module.eks.provider[\\\"registry.terraform.io/hashicorp/http\\\"] (close)\"\n\t\t\"[root] root\" -> \"[root] module.elb (close)\"\n\t\t\"[root] root\" -> \"[root] module.elb.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\"\n\t\t\"[root] root\" -> \"[root] module.lambda-file-systems (close)\"\n\t\t\"[root] root\" -> \"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/archive\\\"] (close)\"\n\t\t\"[root] root\" -> \"[root] module.lambda-file-systems.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\"\n\t\t\"[root] root\" -> \"[root] module.sagemaker (close)\"\n\t\t\"[root] root\" -> \"[root] module.sagemaker.provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\"\n\t\t\"[root] root\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\"\n\t\t\"[root] root\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/random\\\"] (close)\"\n\t}\n}\n","detailed":false,"debug":false,"showUnchanged":true,"ci":true,"opacityFull":true}